(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{283:function(e,n,t){"use strict";n.a={serverUrl:"http://localhost:7400",stripeKey:"pk_test_1SMbb3HOTJRaOp9Cpy8iAg9K00hW9hlE7T",stripeOptions:{}}},346:function(e,n,t){"use strict";t.r(n);t(69);var r=t(25),o=t(0),l=t(283),c=o.a.extend({name:"Dashboard",data:function(){return{userData:null,loaded:!1,userOpened:!1,unverified:!1,payable:!1,keyData:null}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var t,data,r;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.getUserData();case 2:if(!(data=n.sent)){n.next=18;break}return e.userData=data,n.next=7,fetch("".concat(l.a.serverUrl,"/api/payment/payable"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 7:return r=n.sent,"none"===(null===(t=e.userData)||void 0===t?void 0:t.role)&&(e.unverified=!0),n.next=11,r.json();case 11:return e.payable=n.sent,n.next=14,e.getKeysForUser();case 14:e.keyData=n.sent,e.loaded=!0,n.next=19;break;case 18:e.$router.push("/login");case 19:case"end":return n.stop()}}),n)})))()},methods:{resendVerificationEmail:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var t;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if("none"!==(null===(t=e.userData)||void 0===t?void 0:t.role)){n.next=3;break}return n.next=3,fetch("".concat(l.a.serverUrl,"/api/email/sendVerificationEmail/").concat(e.userData.id));case 3:case"end":return n.stop()}}),n)})))()},getUserData:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l.a.serverUrl,"/api/users/userData"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:if(400!==(n=e.sent).status){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,n.json();case 9:return e.abrupt("return",e.sent.user);case 10:case"end":return e.stop()}}),e)})))()},getKeysForUser:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){var t,r,o;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.userData){n.next=3;break}return n.abrupt("return",{discordKey:{value:"You are not logged in!",used:!1},rigelKey:{value:"You are not logged in!",used:!1}});case 3:return n.next=5,fetch("".concat(l.a.serverUrl,"/api/keys/getKeysForUser"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:t.id})});case 5:return r=n.sent,n.next=8,r.json();case 8:if(200===(o=n.sent).status){n.next=13;break}return n.abrupt("return",{discordKey:{value:o.message,used:!1},rigelKey:{value:o.message,used:!1}});case 13:return n.abrupt("return",{discordKey:{value:o.discordKey.value,used:o.discordKey.used},rigelKey:{value:o.rigelKey.value,used:o.rigelKey.used}});case 14:case"end":return n.stop()}}),n)})))()},roleToColor:function(e){return"admin"===e?"#cc2900":"member"===e?"#00800f":"verified"===e?"#003580":"#777"}}}),v=t(61),d=t(86),m=t.n(d),f=t(138),y=t(291),_=t(282),h=t(276),x=t(343),w=t(333),k=t(125),D=t(334),V=t(335),K=t(336),O=t(337),C=t(119),T=t(302),E=t(80),R=t(51),j=t(338),U=t(280),component=Object(v.a)(c,(function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.loaded?t("v-layout",[t("v-container",[t("v-row",[t("v-card",[t("v-card-text",[t("p",[t("span",{staticClass:"display-3 text--primary"},[e._v("\n                            "+e._s(e.userData.username)+"\n                        ")]),e._v(" "),t("span",{staticClass:"display-2",style:{color:e.roleToColor(e.userData.role),fontWeight:"bold"}},[e._v("\n                            "+e._s(e.userData.role.charAt(0).toUpperCase())+"\n                        ")])])]),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{on:{click:function(n){e.userOpened=!e.userOpened}}},[e._v("\n                        "+e._s(e.userOpened?"Less info":"More info")+"\n                        "),t("v-icon",[e._v(e._s(e.userOpened?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1),e._v(" "),t("v-expand-transition",[t("div",{directives:[{name:"show",rawName:"v-show",value:e.userOpened,expression:"userOpened"}]},[t("v-divider"),e._v(" "),t("v-list-item",{attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title",[e._v("Email")]),e._v(" "),t("v-list-item-subtitle",[e._v("\n                                    "+e._s(e.userData.email)+"\n                                ")]),e._v(" "),"none"===e.userData.role?t("v-btn",{attrs:{small:"",width:"10px"},on:{click:e.resendVerificationEmail}},[e._v("\n                                    Resend verification email\n                                ")]):e._e()],1)],1),e._v(" "),t("v-list-item",{attrs:{"two-line":""}},[t("v-list-item-content",[t("v-list-item-title",[e._v("Role")]),e._v(" "),t("v-list-item-subtitle",[e._v("\n                                    "+e._s(e.userData.role)+"\n                                ")])],1)],1)],1)])],1),e._v(" "),t("v-spacer"),e._v(" "),t("v-btn",{attrs:{disabled:"Sold out"===e.payable,color:"primary",to:"/payment"}},[e._v("\n                "+e._s("Sold out"===e.payable?"Sold out":!0===e.payable?"Buy membership":"Configure payment")+"\n            ")])],1),e._v(" "),t("br"),e._v(" "),t("v-row",[e.loaded?t("v-expansion-panels",{attrs:{multiple:""}},[t("v-expansion-panel",[t("v-expansion-panel-header",[e._v("\n                        Discord Key\n                    ")]),e._v(" "),t("v-expansion-panel-content",[e._v("\n                        "+e._s(e.keyData.discordKey.value)+"\n                    ")])],1),e._v(" "),t("v-expansion-panel",[t("v-expansion-panel-header",[e._v("\n                        Rigel Key\n                    ")]),e._v(" "),t("v-expansion-panel-content",[e._v("\n                        "+e._s(e.keyData.rigelKey.value)+"\n                    ")])],1)],1):e._e()],1)],1),e._v(" "),t("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:e.unverified,callback:function(n){e.unverified=n},expression:"unverified"}},[t("v-card",[t("v-card-title",[e._v("Email verification")]),e._v(" "),t("v-card-text",[e._v("\n                In order to be a part of Project Unknown, your email must be\n                verified. Simply go to your email, find the verification\n                email that was sent by us, and click the link. Doing so will\n                help us prevent spam accounts. Thank you!\n            ")]),e._v(" "),t("v-card-actions",[t("v-spacer"),e._v(" "),t("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(n){e.unverified=!1}}},[e._v("Close")])],1)],1)],1)],1):e._e()}),[],!1,null,"183938ae",null);n.default=component.exports;m()(component,{VBtn:f.a,VCard:y.a,VCardActions:_.a,VCardText:_.b,VCardTitle:_.c,VContainer:h.a,VDialog:x.a,VDivider:w.a,VExpandTransition:k.a,VExpansionPanel:D.a,VExpansionPanelContent:V.a,VExpansionPanelHeader:K.a,VExpansionPanels:O.a,VIcon:C.a,VLayout:T.a,VListItem:E.a,VListItemContent:R.a,VListItemSubtitle:R.b,VListItemTitle:R.c,VRow:j.a,VSpacer:U.a})}}]);
(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{283:function(e,t,n){"use strict";t.a={serverUrl:"http://159.89.187.6:7400/",stripeKey:"pk_test_1SMbb3HOTJRaOp9Cpy8iAg9K00hW9hlE7T",stripeOptions:{}}},342:function(e,t,n){"use strict";n.r(t);n(69);var r=n(25),o=n(0),l=n(283),c=o.a.extend({name:"Dashboard",data:function(){return{userData:null,loaded:!1,userOpened:!1,unverified:!1,payable:!1,keyData:null}},mounted:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,data,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getUserData();case 2:if(!(data=t.sent)){t.next=18;break}return e.userData=data,t.next=7,fetch("".concat(l.a.serverUrl,"/api/payment/payable"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({})});case 7:return r=t.sent,"none"===(null===(n=e.userData)||void 0===n?void 0:n.role)&&(e.unverified=!0),t.next=11,r.json();case 11:return e.payable=t.sent,t.next=14,e.getKeysForUser();case 14:e.keyData=t.sent,e.loaded=!0,t.next=19;break;case 18:e.$router.push("/login");case 19:case"end":return t.stop()}}),t)})))()},methods:{getUserData:function(){return Object(r.a)(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(l.a.serverUrl,"/api/users/userData"),{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});case 2:if(400!==(t=e.sent).status){e.next=7;break}return e.abrupt("return",null);case 7:return e.next=9,t.json();case 9:return e.abrupt("return",e.sent.user);case 10:case"end":return e.stop()}}),e)})))()},getKeysForUser:function(){var e=this;return Object(r.a)(regeneratorRuntime.mark((function t(){var n,r,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.userData){t.next=3;break}return t.abrupt("return",{discordKey:{value:"You are not logged in!",used:!1},rigelKey:{value:"You are not logged in!",used:!1}});case 3:return t.next=5,fetch("".concat(l.a.serverUrl,"/api/keys/getKeysForUser"),{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:n.id})});case 5:return r=t.sent,t.next=8,r.json();case 8:if(200===(o=t.sent).status){t.next=13;break}return t.abrupt("return",{discordKey:{value:o.message,used:!1},rigelKey:{value:o.message,used:!1}});case 13:return t.abrupt("return",{discordKey:{value:o.discordKey.value,used:o.discordKey.used},rigelKey:{value:o.rigelKey.value,used:o.rigelKey.used}});case 14:case"end":return t.stop()}}),t)})))()},roleToColor:function(e){return"admin"===e?"#cc2900":"member"===e?"#00800f":"verified"===e?"#003580":"#777"}}}),v=n(61),d=n(86),y=n.n(d),m=n(138),_=n(291),f=n(282),h=n(276),x=n(339),w=n(330),k=n(125),D=n(331),V=n(332),K=n(333),C=n(334),O=n(119),T=n(302),S=n(80),j=n(51),U=n(335),E=n(280),component=Object(v.a)(c,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.loaded?n("v-layout",[n("v-container",[n("v-row",[n("v-card",{staticStyle:{clear:"both"}},[n("v-card-text",[n("p",[n("span",{staticClass:"display-3 text--primary"},[e._v("\n                            "+e._s(e.userData.username)+"\n                        ")]),e._v(" "),n("span",{staticClass:"display-2",style:{color:e.roleToColor(e.userData.role),fontWeight:"bold"}},[e._v("\n                            "+e._s(e.userData.role.charAt(0).toUpperCase())+"\n                        ")])])]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{on:{click:function(t){e.userOpened=!e.userOpened}}},[e._v("\n                        "+e._s(e.userOpened?"Less info":"More info")+"\n                        "),n("v-icon",[e._v(e._s(e.userOpened?"mdi-chevron-up":"mdi-chevron-down"))])],1)],1),e._v(" "),n("v-expand-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.userOpened,expression:"userOpened"}]},[n("v-divider"),e._v(" "),n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Email")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                                    "+e._s(e.userData.email)+"\n                                ")])],1)],1),e._v(" "),n("v-list-item",{attrs:{"two-line":""}},[n("v-list-item-content",[n("v-list-item-title",[e._v("Role")]),e._v(" "),n("v-list-item-subtitle",[e._v("\n                                    "+e._s(e.userData.role)+"\n                                ")])],1)],1)],1)])],1),e._v(" "),n("v-spacer"),e._v(" "),n("v-btn",{attrs:{disabled:"Sold out"===e.payable,color:"primary",to:"/payment"}},[e._v("\n                "+e._s("Sold out"===e.payable?"Sold out":!0===e.payable?"Buy membership":"Configure payment")+"\n            ")])],1),e._v(" "),n("br"),e._v(" "),n("v-row",[e.loaded?n("v-expansion-panels",{attrs:{multiple:""}},[n("v-expansion-panel",[n("v-expansion-panel-header",[e._v("\n                        Discord Key\n                    ")]),e._v(" "),n("v-expansion-panel-content",[e._v("\n                        "+e._s(e.keyData.discordKey.value)+"\n                    ")])],1),e._v(" "),n("v-expansion-panel",[n("v-expansion-panel-header",[e._v("\n                        Rigel Key\n                    ")]),e._v(" "),n("v-expansion-panel-content",[e._v("\n                        "+e._s(e.keyData.rigelKey.value)+"\n                    ")])],1)],1):e._e()],1)],1),e._v(" "),n("v-dialog",{attrs:{persistent:"",width:"500"},model:{value:e.unverified,callback:function(t){e.unverified=t},expression:"unverified"}},[n("v-card",[n("v-card-title",[e._v("Email verification")]),e._v(" "),n("v-card-text",[e._v("\n                In order to be a part of Project Unknown, your email must be\n                verified. Simply go to your email, find the verification\n                email that was sent by us, and click the link. Doing so will\n                help us prevent spam accounts. Thank you!\n            ")]),e._v(" "),n("v-card-text",[e._v("\n                If you fail to verify your email within the next 3 days,\n                your account will be deleted.\n            ")]),e._v(" "),n("v-card-actions",[n("v-spacer"),e._v(" "),n("v-btn",{attrs:{color:"green darken-1",text:""},on:{click:function(t){e.unverified=!1}}},[e._v("Close")])],1)],1)],1)],1):e._e()}),[],!1,null,"2b191d78",null);t.default=component.exports;y()(component,{VBtn:m.a,VCard:_.a,VCardActions:f.a,VCardText:f.b,VCardTitle:f.c,VContainer:h.a,VDialog:x.a,VDivider:w.a,VExpandTransition:k.a,VExpansionPanel:D.a,VExpansionPanelContent:V.a,VExpansionPanelHeader:K.a,VExpansionPanels:C.a,VIcon:O.a,VLayout:T.a,VListItem:S.a,VListItemContent:j.a,VListItemSubtitle:j.b,VListItemTitle:j.c,VRow:U.a,VSpacer:E.a})}}]);